node('basic-node-0') {
    def random = new Random()
    stage('Precheck') {
        print('Checking things out.')
        githubNotify context: 'Notification key', description: 'This is a shorted example',  status: 'PENDING'
    }

    stage('Build') {
        print('Building things.')
    }

    stage('Testing') {
        parallel(
            'Xenial': {
                def random_sleep = random.nextInt(30) + 1
                print('Testing xenial!')
                sleep(random_sleep)
                print('Done!')
            },
            'Windows': {
                def random_sleep = random.nextInt(30) + 1
                print('Testing Windows!')
                sleep(random_sleep)
                print('Done!')
            }
        )
    }
}